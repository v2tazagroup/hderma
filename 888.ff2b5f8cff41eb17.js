"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[888],{4888:(L,_,r)=>{r.r(_),r.d(_,{DanhmucProductModule:()=>I});var x=r(4755),m=r(2480),T=r(3144),u=r(9401),A=r(4800),E=r(9016),s=r(5258),S=r(964),P=r(3276),y=r(2611),t=r(2223),g=r(6286),D=r(3966),C=r(1728),J=r(430),v=r(8097),h=r(9114),Z=r(2214),N=r(3649);function w(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tree-node",7),t._UZ(1,"button",8),t.TgZ(2,"div",9)(3,"div",10)(4,"span",11),t.NdJ("click",function(){const o=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.updateTrangthai(o))}),t._uU(5),t.qZA(),t.TgZ(6,"span",12),t._uU(7),t.qZA()(),t.TgZ(8,"div",13)(9,"span",14),t.NdJ("click",function(){const o=t.CHM(e).$implicit,c=t.oxw(),d=t.MAs(9);return t.KtG(c.OpenThemDanhmuc(o,d))}),t._uU(10," note_add "),t.qZA(),t.TgZ(11,"span",15),t._uU(12," edit "),t.qZA(),t.TgZ(13,"span",16),t.NdJ("click",function(){const o=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteDanhmuc(o.id))}),t._uU(14," delete "),t.qZA()()()()}if(2&i){const e=l.$implicit;t.xp6(2),t.s9C("routerLink",e.Slug),t.xp6(2),t.Gre("material-icons ",1==e.Trangthai?"text-yellow-500":"",""),t.xp6(1),t.hij(" ",1==e.Trangthai?"star":"star_border"," "),t.xp6(2),t.Oqu(e.Title)}}function O(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tree-node",7)(1,"button",17)(2,"mat-icon",18),t._uU(3),t.qZA()(),t.TgZ(4,"div",19)(5,"div",10)(6,"span",20),t._uU(7," collections_bookmark "),t.qZA(),t.TgZ(8,"span",12),t._uU(9),t.qZA()(),t.TgZ(10,"div",21)(11,"span",22),t.NdJ("click",function(){const o=t.CHM(e).$implicit,c=t.oxw(),d=t.MAs(9);return t.KtG(c.OpenThemDanhmuc(o,d))}),t._uU(12," note_add "),t.qZA(),t.TgZ(13,"span",23),t._uU(14," edit "),t.qZA(),t.TgZ(15,"span",24),t.NdJ("click",function(){const o=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deleteDanhmuc(o.id))}),t._uU(16," delete "),t.qZA()()()()}if(2&i){const e=l.$implicit,n=t.oxw();t.xp6(1),t.uIk("aria-label","Toggle "+e.Title),t.xp6(2),t.hij(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),t.xp6(1),t.MGl("routerLink","detail/",e.Slug,""),t.xp6(5),t.hij("",e.Title," ")}}const M=function(){return{standalone:!0}};function U(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"mat-dialog-content")(1,"form")(2,"div")(3,"mat-form-field",25)(4,"mat-label"),t._uU(5,"Slug"),t.qZA(),t.TgZ(6,"input",26),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.DanhmucList.Slug=a)}),t.qZA()()(),t.TgZ(7,"div")(8,"mat-form-field",27)(9,"mat-label"),t._uU(10,"T\xean Danh M\u1ee5c"),t.qZA(),t.TgZ(11,"input",28),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.DanhmucList.Title=a)}),t.qZA()()()(),t.TgZ(12,"div",29)(13,"button",30),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSave())}),t._uU(14," X\xe1c nh\u1eadn "),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.DanhmucList.Slug)("ngModelOptions",t.DdM(4,M)),t.xp6(5),t.Q6J("ngModel",e.DanhmucList.Title)("ngModelOptions",t.DdM(5,M))}}let F=(()=>{class i{constructor(e,n,a){this.dialog=e,this.fb=n,this._danhmucService=a,this.percentage=0,this._transformer=(o,c)=>({expandable:!!o.children&&o.children.length>0,level:c,...o}),this.treeControl=new S.C2(o=>o.level,o=>o.expandable),this.treeFlattener=new s.JZ(this._transformer,o=>o.level,o=>o.expandable,o=>o.children),this.hasChild=(o,c)=>c.expandable,this.hasNoContent=(o,c)=>""===c.name,this.dataSource1=new s.kc(this.treeControl,this.treeFlattener),this.nest=(o,c="",d="pid")=>{if(o)return o?.filter(p=>p[d]==c).map(p=>({...p,children:this.nest(o,p.id)}))}}OpenThemDanhmuc(e,n){this.temp=e,this.dialog.open(n)}clickupdate(){this.danhmuc.forEach(e=>{this._danhmucService.postDanhmuc(e).subscribe(n=>console.log(n))})}onSave(){this.DanhmucList.pid=this.temp.id,this._danhmucService.postDanhmuc(this.DanhmucList).subscribe(e=>{e&&(this.resetForm(),alert("T\u1ea1o danh m\u1ee5c th\xe0nh c\xf4ng"),this.dialog.closeAll())})}updateTrangthai(e){e.Trangthai=0==e.Trangthai?1:0,this._danhmucService.updateDanhmuc(e).subscribe()}deleteDanhmuc(e){this._danhmucService.deleteDanhmuc(e).subscribe(n=>{n&&alert("Xo\xe1 danh m\u1ee5c th\xe0nh c\xf4ng")})}resetForm(){this.DanhmucList={Title:"",pid:"",Mota:"",Slug:"",Image:"",Ordering:0}}ngOnInit(){this.resetForm(),this._danhmucService.getDanhmucs().subscribe(),this._danhmucService.danhmucs$.subscribe(e=>{e&&(this.danhmuc=e,this.danhmuc.sort((n,a)=>n.Ordering-a.Ordering),this.dataSource1.data=this.nest(e))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.uw),t.Y36(u.qu),t.Y36(D.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["tazagroup-danhmuc-product"]],viewQuery:function(e,n){if(1&e&&(t.Gf(y.YE,5),t.Gf(P.NW,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.sort=a.first),t.iGM(a=t.CRH())&&(n.paginator=a.first)}},decls:10,vars:3,consts:[["autosize","",1,"example-container","bg-white"],["opened","","mode","side",1,"example-sidenav","w-1/3"],["drawer",""],[3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["ThemDanhmucDialog",""],["matTreeNodePadding",""],["mat-icon-button","","disabled",""],["routerLinkActive","bg-gray-200",1,"flex","items-center","justify-between","space-x-4","cursor-pointer","w-full","px-3","py-1","group",3,"routerLink"],[1,"flex","items-center","space-x-2"],[3,"click"],[1,""],[1,"hidden","group-hover:flex","items-center","space-x-2"],["title","T\u1ea1o danh m\u1ee5c con",1,"material-icons","cursor-pointer","text-blue-500",3,"click"],["title","Ch\u1ec9nh s\u1eeda",1,"material-icons","text-blue-500"],["title","Xo\xe1",1,"material-icons","cursor-pointer","text-red-500",3,"click"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["routerLinkActive","bg-gray-200",1,"flex","items-center","space-x-4","justify-between","cursor-pointer","w-full","group","hover:bg-gray-200","px-3","py-1","rounded",3,"routerLink"],[1,"material-icons","text-yellow-500"],[1,"items-center","space-x-2","hidden","group-hover:flex"],["title","T\u1ea1o danh m\u1ee5c con","matTooltip","T\u1ea1o danh m\u1ee5c con",1,"material-icons","cursor-pointer","text-blue-500",3,"click"],[1,"material-icons","text-blue-500"],[1,"material-icons","cursor-pointer","text-red-500",3,"click"],["appearance","outline",1,"flex","w-full"],["matInput","","type","text","placeholder","Slug",3,"ngModel","ngModelOptions","ngModelChange"],["appearance","outline",1,"flex","\u01b0-full"],["matInput","","type","text","placeholder","T\xean danh muc",3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex","justify-end"],["mat-button","","matDialogClose","","color","white",1,"bg-green-500","text-white",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-drawer-container",0)(1,"mat-drawer",1,2)(3,"mat-tree",3),t.YNc(4,w,15,6,"mat-tree-node",4),t.YNc(5,O,17,4,"mat-tree-node",5),t.qZA()(),t.TgZ(6,"div"),t._UZ(7,"router-outlet"),t.qZA()(),t.YNc(8,U,15,6,"ng-template",null,6,t.W1O)),2&e&&(t.xp6(3),t.Q6J("dataSource",n.dataSource1)("treeControl",n.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",n.hasChild))},dependencies:[C.lW,C.RK,g.ZT,g.xY,J.Hw,v.Nt,h.KE,h.hX,Z.jA,Z.kh,N.gM,s.fQ,s.ah,s.eu,s.gi,s.uo,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,m.lC,m.rH,m.Od]}),i})();function k(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"span",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(1,"T\u1ea1o m\u1edbi"),t.qZA()}}function G(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"span",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.updateDanhmuc())}),t._uU(1,"C\u1eadp nh\u1eadt"),t.qZA()}}const f=function(){return{standalone:!0}};let b=(()=>{class i{constructor(e,n){this.route=e,this._danhmucService=n,this.percentage=0,this.nest=(a,o="",c="pid")=>{if(a)return a?.filter(d=>d[c]==o).map(d=>({...d,children:this.nest(a,d.id)}))}}onSubmit(){this._danhmucService.postDanhmuc(this.danhmuc).subscribe()}updateDanhmuc(){this._danhmucService.updateDanhmuc(this.danhmuc).subscribe(e=>{e&&alert("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng")})}onFileBrowse(e,n){let a=e.target.files[0];const o=new FormData;o.append("file",a),this._danhmucService.uploadDriver(o).subscribe(c=>{c&&99==n&&(this.danhmuc.Image=c.idDrive,this._danhmucService.updateDanhmuc(this.danhmuc).subscribe(d=>{}))})}ngOnInit(){this.danhmuc={Title:"",pid:"",Mota:"",Slug:"",Image:"",Ordering:0},this.route.params.subscribe(e=>{this.slug=e.slug,this.slug&&(this._danhmucService.getDanhmucDetail(this.slug).subscribe(),this._danhmucService.danhmuc$.subscribe(n=>{n&&(this.danhmuc=n)}))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.gz),t.Y36(D.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["tazagroup-danhmuc-product-detail"]],decls:26,vars:12,consts:[[1,"w-full","pt-10"],[1,"space-y-5","px-5"],[1,""],["appearance","outline",1,"flex","w-full"],["matInput","","type","text","placeholder","T\u1ea9y trang",1,"w-full","text-xs",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","text","placeholder","Slug",1,"w-full","text-xs",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","text","placeholder","Ordering",1,"w-full","text-xs",3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex","items-center","justify-between"],[1,"w-1/2"],["for",""],["type","file","accept","image/*",3,"change"],["alt","",3,"src"],[1,"flex","items-center"],["class","px-3 py-1 text-white rounded bg-green-500",3,"click",4,"ngIf"],["class","px-3 py-1 text-white rounded bg-blue-500",3,"click",4,"ngIf"],[1,"px-3","py-1","text-white","rounded","bg-green-500",3,"click"],[1,"px-3","py-1","text-white","rounded","bg-blue-500",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5," Ti\xeau \u0111\u1ec1"),t.qZA(),t.TgZ(6,"input",4),t.NdJ("ngModelChange",function(o){return n.danhmuc.Title=o}),t.qZA()()(),t.TgZ(7,"div",2)(8,"mat-form-field",3)(9,"mat-label"),t._uU(10," Slug"),t.qZA(),t.TgZ(11,"input",5),t.NdJ("ngModelChange",function(o){return n.danhmuc.Slug=o}),t.qZA()()(),t.TgZ(12,"div",2)(13,"mat-form-field",3)(14,"mat-label"),t._uU(15," Ordering"),t.qZA(),t.TgZ(16,"input",6),t.NdJ("ngModelChange",function(o){return n.danhmuc.Ordering=o}),t.qZA()()(),t.TgZ(17,"div",7)(18,"div",8)(19,"label",9),t._uU(20,"H\xecnh Thumbnail"),t.qZA(),t.TgZ(21,"input",10),t.NdJ("change",function(o){return n.onFileBrowse(o,99)}),t.qZA(),t._UZ(22,"img",11),t.qZA()(),t.TgZ(23,"div",12),t.YNc(24,k,2,0,"span",13),t.YNc(25,G,2,0,"span",14),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("ngModel",n.danhmuc.Title)("ngModelOptions",t.DdM(9,f)),t.xp6(5),t.Q6J("ngModel",n.danhmuc.Slug)("ngModelOptions",t.DdM(10,f)),t.xp6(5),t.Q6J("ngModel",n.danhmuc.Ordering)("ngModelOptions",t.DdM(11,f)),t.xp6(6),t.MGl("src","https://drive.google.com/uc?id=",n.danhmuc.Image,"",t.LSH),t.xp6(2),t.Q6J("ngIf",!n.slug),t.xp6(1),t.Q6J("ngIf",n.slug))},dependencies:[x.O5,v.Nt,h.KE,h.hX,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F]}),i})();var H=r(2944);let I=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[T.JF],imports:[x.ez,H.q,u.UX,u.u5,T.JF,A.Z_,E.Eb,m.Bz.forChild([{path:"",component:F,children:[{path:":slug",component:b},{path:"",component:b}]}]),m.Bz]}),i})()}}]);