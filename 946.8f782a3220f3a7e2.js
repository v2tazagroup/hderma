"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[946],{2946:(V,C,r)=>{r.r(C),r.d(C,{TagsModule:()=>R});var m=r(4755),d=r(2480),w=r(3144),g=r(9401),y=r(4800),D=r(964),_=r(3276),h=r(2611),c=r(3204),x=r(5258),t=r(2223),b=r(6286),Z=r(4355),E=r(430),v=r(8097),p=r(9114),A=r(2214);function S(n,o){1&n&&(t.TgZ(0,"th",25),t._uU(1," Lo\u1ea1i tag "),t.qZA())}function N(n,o){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",0===e.Loaitag?"T\xecnh tr\u1ea1ng da":"Lo\u1ea1i s\u1ea3n ph\u1ea9m"," ")}}function U(n,o){1&n&&(t.TgZ(0,"th",27),t._uU(1,"Ti\xeau \u0111\u1ec1"),t.qZA())}function J(n,o){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.Tieude," ")}}function Y(n,o){1&n&&(t.TgZ(0,"th",27),t._uU(1,"M\xf4 t\u1ea3"),t.qZA())}function F(n,o){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.Mota," ")}}function O(n,o){1&n&&(t.TgZ(0,"th",27),t._uU(1,"Hi\u0300nh a\u0309nh"),t.qZA())}const L=function(n){return{hidden:n}};function Q(n,o){if(1&n&&(t.TgZ(0,"td",26),t._UZ(1,"img",28),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.MGl("src","https://drive.google.com/uc?id=",e.Image,"",t.LSH),t.Q6J("ngClass",t.VKq(2,L,""===e.image))}}function H(n,o){1&n&&t._UZ(0,"th",27)}function I(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",26)(1,"button",29),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.selectProduct(i))}),t.TgZ(2,"span",30),t._uU(3,"edit"),t.qZA(),t.TgZ(4,"span",31),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.deleteProduct(i.id))}),t._uU(5," delete "),t.qZA(),t.TgZ(6,"span",32),t.NdJ("click",function(){const i=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.updateTag(i))}),t._uU(7),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(2),t.s9C("routerLink",e.id),t.xp6(5),t.hij(" ",0==e.Trangthai?"star":"star_border"," ")}}function k(n,o){1&n&&t._UZ(0,"tr",33)}function B(n,o){1&n&&t._UZ(0,"tr",34)}const q=function(){return[10,25,100]};let G=(()=>{class n{constructor(e,a,l){this.dialog=e,this.fb=a,this._tagService=l,this.percentage=0,this._transformer=(i,s)=>({expandable:!!i.children&&i.children.length>0,level:s,...i}),this.treeControl=new D.C2(i=>i.level,i=>i.expandable),this.treeFlattener=new x.JZ(this._transformer,i=>i.level,i=>i.expandable,i=>i.children),this.hasChild=(i,s)=>s.expandable,this.hasNoContent=(i,s)=>""===s.name,this.dataSource1=new x.kc(this.treeControl,this.treeFlattener),this.nest=(i,s="",T="pid")=>{if(i)return i?.filter(u=>u[T]==s).map(u=>({...u,children:this.nest(i,u.id)}))},this.displayedColumns=["Loaitag","Tieude","Mota","Image","action"]}OpenThemTag(e,a){this.temp=e,this.dialog.open(a)}clickupdate(){this.tag.forEach(e=>{this._tagService.postTag(e).subscribe(a=>console.log(a))})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}selectProduct(e){this.resetForm()}deleteProduct(e){this._tagService.deleteTag(e).subscribe(a=>{a&&alert("Xo\xe1 Tag th\xe0nh c\xf4ng")})}onSave(){this.TagList.pid=this.temp.id,this._tagService.postTag(this.TagList).subscribe(e=>{e&&(this.resetForm(),alert("T\u1ea1o danh m\u1ee5c th\xe0nh c\xf4ng"),this.dialog.closeAll())})}updateTag(e){e.Trangthai=0==e.Trangthai?1:0,this._tagService.updateTag(e).subscribe()}deleteTag(e){this._tagService.deleteTag(e).subscribe(a=>{a&&alert("Xo\xe1 danh m\u1ee5c th\xe0nh c\xf4ng")})}resetForm(){this.TagList={Title:"",Mota:"",Slug:"",Image:"",Ordering:0}}ngOnInit(){this.resetForm(),this._tagService.getTags().subscribe(),this._tagService.tags$.subscribe(e=>{e&&(this.tags=e,this.dataSource=new c.by(e)),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.uw),t.Y36(g.qu),t.Y36(Z.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tazagroup-tags"]],viewQuery:function(e,a){if(1&e&&(t.Gf(h.YE,5),t.Gf(_.NW,5)),2&e){let l;t.iGM(l=t.CRH())&&(a.sort=l.first),t.iGM(l=t.CRH())&&(a.paginator=l.first)}},decls:35,vars:6,consts:[[1,"flex","flex-col","flex-auto","w-full","tag"],["autosize","",1,"example-container"],["mode","side","opened","true","position","end",1,"example-sidenav","w-1/2","px-4","py-2"],[1,"example-sidenav-content","w-full"],[1,"flex","flex-col","w-full"],[1,"text-2xl","text-center","py-2","font-bold"],[1,"flex","items-center"],[1,"fuse-mat-no-subscript","rounded-full","m-auto","w-full","p-2"],["matInput","","type","text","placeholder","T\xecm Ki\u1ebfm",1,"w-full","min-w-0","py-1","border-0",3,"maxLength","keyup"],["input",""],["matPrefix",""],[1,"material-icons"],[1,"w-full","overflow-auto"],["mat-table","","matSort","",1,"w-full","product-table",3,"dataSource"],["matColumnDef","Loaitag"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Tieude"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","Mota"],["matColumnDef","Image"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"w-10","h-10","object-contain",3,"src","ngClass"],[1,"text-blue-400","flex","items-center",3,"click"],[1,"material-icons","text-lg","mr-2",3,"routerLink"],["title","Xo\xe1",1,"material-icons","cursor-pointer","text-red-500",3,"click"],["title","Xo\xe1",1,"material-icons","cursor-pointer","text-yellow-500",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1)(2,"mat-drawer",2),t._UZ(3,"router-outlet"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5),t._uU(7," Danh s\xe1ch tags "),t.qZA(),t.TgZ(8,"div",6)(9,"mat-form-field",7)(10,"input",8,9),t.NdJ("keyup",function(i){return a.applyFilter(i)}),t.qZA(),t.TgZ(12,"mat-icon",10)(13,"span",11),t._uU(14," search "),t.qZA()()()(),t.TgZ(15,"div",12)(16,"table",13),t.ynx(17,14),t.YNc(18,S,2,0,"th",15),t.YNc(19,N,2,1,"td",16),t.BQk(),t.ynx(20,17),t.YNc(21,U,2,0,"th",18),t.YNc(22,J,2,1,"td",16),t.BQk(),t.ynx(23,19),t.YNc(24,Y,2,0,"th",18),t.YNc(25,F,2,1,"td",16),t.BQk(),t.ynx(26,20),t.YNc(27,O,2,0,"th",18),t.YNc(28,Q,2,4,"td",16),t.BQk(),t.ynx(29,21),t.YNc(30,H,1,0,"th",18),t.YNc(31,I,8,2,"td",16),t.BQk(),t.YNc(32,k,1,0,"tr",22),t.YNc(33,B,1,0,"tr",23),t.qZA(),t._UZ(34,"mat-paginator",24),t.qZA()()()()()),2&e&&(t.xp6(10),t.Q6J("maxLength",30),t.xp6(6),t.Q6J("dataSource",a.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,q)))},dependencies:[m.mk,E.Hw,v.Nt,p.KE,p.qo,_.NW,A.jA,A.kh,h.YE,h.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,d.lC,d.rH],styles:[".tag[_ngcontent-%COMP%]   .mat-drawer-container[_ngcontent-%COMP%]{height:100vh}"]}),n})();var z=r(1678),$=r(1217),j=r(787);function K(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",16),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.onSubmit())}),t._uU(1,"T\u1ea1o m\u1edbi"),t.qZA()}}function X(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",17),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.updateTag())}),t._uU(1,"C\u1eadp nh\u1eadt"),t.qZA()}}const f=function(){return{standalone:!0}};let M=(()=>{class n{constructor(e,a,l){this.route=e,this._tagService=a,this._danhmucService=l,this.percentage=0,this.nest=(i,s="",T="pid")=>{if(i)return i?.filter(u=>u[T]==s).map(u=>({...u,children:this.nest(i,u.id)}))}}onFileBrowse(e){let a=e.target.files[0];const l=new FormData;l.append("file",a),this._danhmucService.uploadDriver(l).subscribe(i=>{i&&(this.tag.Image=i.idDrive)})}onSubmit(){this._tagService.postTag(this.tag).subscribe()}updateTag(){this._tagService.updateTag(this.tag).subscribe(e=>{e&&alert("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng")})}ngOnInit(){this.tag={Tieude:"",Loaitag:0,Image:"",Ordering:0},this.route.params.subscribe(e=>{this.id=e.id,this.id&&(this._tagService.getTagDetail(this.id).subscribe(),this._tagService.tag$.subscribe(a=>{a&&(this.tag=a)}))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.gz),t.Y36(Z.i),t.Y36(z.a))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tazagroup-tag-detail"]],decls:28,vars:12,consts:[[1,"w-full","pt-10"],[1,"space-y-5","px-5"],[1,""],["appearance","outline",1,"flex","w-full"],["matInput","","type","text","placeholder","T\u1ea9y trang",1,"w-full","text-xs",3,"ngModel","ngModelOptions","ngModelChange"],["appearance","outline",1,"w-full"],[3,"ngModel","ngModelOptions","ngModelChange"],["value","0"],["value","1"],["matInput","","type","text","placeholder","Ordering",1,"w-full","text-xs",3,"ngModel","ngModelOptions","ngModelChange"],["for",""],["type","file","accept","image/*",3,"change"],["alt","",3,"src"],[1,"flex","items-center"],["class","px-3 py-1 text-white rounded bg-green-500 cursor-pointer",3,"click",4,"ngIf"],["class","px-3 py-1 text-white rounded bg-blue-500 cursor-pointer",3,"click",4,"ngIf"],[1,"px-3","py-1","text-white","rounded","bg-green-500","cursor-pointer",3,"click"],[1,"px-3","py-1","text-white","rounded","bg-blue-500","cursor-pointer",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5," Ti\xeau \u0111\u1ec1"),t.qZA(),t.TgZ(6,"input",4),t.NdJ("ngModelChange",function(i){return a.tag.Tieude=i}),t.qZA()()(),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Lo\u1ea1i Tags"),t.qZA(),t.TgZ(10,"mat-select",6),t.NdJ("ngModelChange",function(i){return a.tag.Loaitag=i}),t.TgZ(11,"mat-option",7),t._uU(12,"T\xecnh tr\u1ea1ng da"),t.qZA(),t.TgZ(13,"mat-option",8),t._uU(14,"Lo\u1ea1i s\u1ea3n ph\u1ea9m"),t.qZA()()(),t.TgZ(15,"div",2)(16,"mat-form-field",3)(17,"mat-label"),t._uU(18," Ordering"),t.qZA(),t.TgZ(19,"input",9),t.NdJ("ngModelChange",function(i){return a.tag.Ordering=i}),t.qZA()()(),t.TgZ(20,"div",2)(21,"label",10),t._uU(22,"H\xecnh Thumbnail"),t.qZA(),t.TgZ(23,"input",11),t.NdJ("change",function(i){return a.onFileBrowse(i)}),t.qZA(),t._UZ(24,"img",12),t.qZA(),t.TgZ(25,"div",13),t.YNc(26,K,2,0,"span",14),t.YNc(27,X,2,0,"span",15),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("ngModel",a.tag.Tieude)("ngModelOptions",t.DdM(9,f)),t.xp6(4),t.Q6J("ngModel",a.tag.Loaitag)("ngModelOptions",t.DdM(10,f)),t.xp6(9),t.Q6J("ngModel",a.tag.Ordering)("ngModelOptions",t.DdM(11,f)),t.xp6(5),t.MGl("src","https://drive.google.com/uc?id=",a.tag.Image,"",t.LSH),t.xp6(2),t.Q6J("ngIf",!a.id),t.xp6(1),t.Q6J("ngIf",a.id))},dependencies:[m.O5,g._Y,g.Fj,g.JJ,g.JL,g.On,g.F,$.ey,v.Nt,p.KE,p.hX,j.gD]}),n})();var P=r(2944);let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.ez,g.u5,w.JF,P.q,g.UX,y.Z_,d.Bz.forChild([{path:"",component:G,children:[{path:"",component:M},{path:":id",component:M}]}]),d.Bz]}),n})()}}]);